function toArray(e){return[].slice.call(e)}function getSheetRules(e){var t=e.media&&e.media.mediaText;return e.disabled?[]:t&&t.length&&!window.matchMedia(t).matches?[]:toArray(e.cssRules)}function _find(e,t){e.match(t);return t?t.length:0}function calculateScore(e){for(var t,n,c=[0,0,0],i=e.split(" ");t=i.shift(),"string"==typeof t;)n=_find(t,PSEUDO_ELEMENTS_RE),c[2]=n,n&&(t=t.replace(PSEUDO_ELEMENTS_RE,"")),n=_find(t,PSEUDO_CLASSES_RE),c[1]=n,n&&(t=t.replace(PSEUDO_CLASSES_RE,"")),n=_find(t,ATTR_RE),c[1]+=n,n&&(t=t.replace(ATTR_RE,"")),n=_find(t,ID_RE),c[0]=n,n&&(t=t.replace(ID_RE,"")),n=_find(t,CLASS_RE),c[1]+=n,n&&(t=t.replace(CLASS_RE,"")),c[2]+=_find(t,ELEMENT_RE);return parseInt(c.join(""),10)}function getSpecificityScore(e,t){for(var n,c,i=t.split(","),o=0;n=i.shift();)e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,e.matches(n)&&(c=calculateScore(n),o=c>o?c:o);return o}function sortBySpecificity(e,t){function n(t,n){return getSpecificityScore(e,n.selectorText)-getSpecificityScore(e,t.selectorText)}return t.sort(n)}function getNodeCSSRules(e){var t,n,c,i,o=[];for(t=toArray(window.document.styleSheets);n=t.shift();)for(c=getSheetRules(n);i=c.shift();)i.styleSheet?c=getSheetRules(i.styleSheet).concat(c):i.media?c=getSheetRules(i).concat(c):e.matches(i.selectorText)&&o.push(i);return sortBySpecificity(e,o)}function wittyComeback(){cameback||(console.warn("I know, I know, 'getMatchedCSSRules()' is depricated, but it's WAY faster than the polyfill. Only when it's completely removed will I fallback to the polyfill."),cameback=!0)}var ELEMENT_RE=/[\w-]+/g,ID_RE=/#[\w-]+/g,CLASS_RE=/\.[\w-]+/g,ATTR_RE=/\[[^\]]+\]/g,PSEUDO_CLASSES_RE=/\:(?!not)[\w-]+(\(.*\))?/g,PSEUDO_ELEMENTS_RE=/\:\:?(after|before|first-letter|first-line|selection)/g,cameback=!1;!function(){function e(e){var t=document.getElementById(e),n=document.createRange();n.selectNodeContents(t);var c=window.getSelection();c.removeAllRanges(),c.addRange(n)}var t=function(e,t,n){var n=n||{},c={},i=function(e){!!c[e.selectorText]==!1&&(c[e.selectorText]={});var t=e.style.cssText.split(/;(?![A-Za-z0-9])/);t.forEach(function(t){if(!!t!=!1){var n=t.split(": ");n[0]=n[0].trim(),n[1]=n[1].trim(),c[e.selectorText][n[0]]=n[1]}})},o=function(){for(var c=e.innerHeight,o=t.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,function(e){return NodeFilter.FILTER_ACCEPT},!0);o.nextNode();){var r=o.currentNode,a=r.getBoundingClientRect();if(a.top<c||n.scanFullPage){var l;if("function"!=typeof e.getMatchedCSSRules?l=getNodeCSSRules(r):(l=e.getMatchedCSSRules(r),wittyComeback()),l||(l=getNodeCSSRules(r)),l)for(var s=0;s<l.length;s++)i(l[s])}}};this.generate=function(){var e="";for(var t in c){e+=t+"{";for(var n in c[t])e+=n+":"+c[t][n]+";";e+="}"}return e},o()};document.body.scrollTop=0;var n=new t(window,document),c=n.generate(),i=document.createElement("div");i.id="CriticalSnap";var o="<div><h1>Critical Snapshot</h1>";o+='<p id="CriticalSnap__output-css">'+c+"</p>",o+='<div id="CriticalSnap__buttons"><button type="button" class="CriticalSnap__button" id="CriticalSnap__copy">Copy</button>',o+='<button type="button" class="CriticalSnap__button" id="CriticalSnap__preview">Preview</button>',o+='<button type="button" class="CriticalSnap__button" id="CriticalSnap__close">Close</button></div>',o+="</div>",i.innerHTML=o,document.body.appendChild(i);var r=function(t){t.preventDefault(),t.stopPropagation(),e("CriticalSnap__output-css"),document.execCommand("copy"),d.style.backgroundColor="#34A853",d.style.color="#fff",d.innerHTML="Copied <span>üëç</span>"},a=function(e){e.preventDefault(),e.stopPropagation();const t=[].slice.call(document.querySelectorAll('[type="text/css"]'));t.forEach(function(e){e.remove()});const n=[].slice.call(document.getElementsByTagName("style"));n.forEach(function(e){e.remove()});var i=document.createElement("style");i.innerHTML=c,document.getElementsByTagName("head")[0].appendChild(i),S.removeEventListener("click",a),S.remove(),u()},l=function(t){t.preventDefault(),t.stopPropagation(),e("CriticalSnap__output-css")},s=function(e){e&&e.preventDefault(),E()},u=function(){i.className="CriticalSnap__minified"},d=document.getElementById("CriticalSnap__copy"),S=document.getElementById("CriticalSnap__preview"),f=document.getElementById("CriticalSnap__output-css"),p=document.getElementById("CriticalSnap");d.addEventListener("click",r),S.addEventListener("click",a),f.addEventListener("click",l),p.addEventListener("click",s);var E=function(){d.removeEventListener("click",r),S.removeEventListener("click",a),f.removeEventListener("click",l),p.removeEventListener("click",s),i.remove()}}();
