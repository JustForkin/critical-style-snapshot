function toArray(e){return[].slice.call(e)}function getSheetRules(e){var t=e.media&&e.media.mediaText;return e.disabled?[]:t&&t.length&&!window.matchMedia(t).matches?[]:toArray(e.cssRules)}function _find(e,t){e.match(t);return t?t.length:0}function calculateScore(e){for(var t,n,i=[0,0,0],c=e.split(" ");t=c.shift(),"string"==typeof t;)n=_find(t,PSEUDO_ELEMENTS_RE),i[2]=n,n&&(t=t.replace(PSEUDO_ELEMENTS_RE,"")),n=_find(t,PSEUDO_CLASSES_RE),i[1]=n,n&&(t=t.replace(PSEUDO_CLASSES_RE,"")),n=_find(t,ATTR_RE),i[1]+=n,n&&(t=t.replace(ATTR_RE,"")),n=_find(t,ID_RE),i[0]=n,n&&(t=t.replace(ID_RE,"")),n=_find(t,CLASS_RE),i[1]+=n,n&&(t=t.replace(CLASS_RE,"")),i[2]+=_find(t,ELEMENT_RE);return parseInt(i.join(""),10)}function getSpecificityScore(e,t){for(var n,i,c=t.split(","),r=0;n=c.shift();)e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,e.matches(n)&&(i=calculateScore(n),r=i>r?i:r);return r}function sortBySpecificity(e,t){function n(t,n){return getSpecificityScore(e,n.selectorText)-getSpecificityScore(e,t.selectorText)}return t.sort(n)}function getNodeCSSRules(e){var t,n,i,c,r=[];for(t=toArray(window.document.styleSheets);n=t.shift();)for(i=getSheetRules(n);c=i.shift();)c.styleSheet?i=getSheetRules(c.styleSheet).concat(i):c.media?i=getSheetRules(c).concat(i):e.matches(c.selectorText)&&r.push(c);return sortBySpecificity(e,r)}var ELEMENT_RE=/[\w-]+/g,ID_RE=/#[\w-]+/g,CLASS_RE=/\.[\w-]+/g,ATTR_RE=/\[[^\]]+\]/g,PSEUDO_CLASSES_RE=/\:(?!not)[\w-]+(\(.*\))?/g,PSEUDO_ELEMENTS_RE=/\:\:?(after|before|first-letter|first-line|selection)/g;!function(){function e(e){var t=document.getElementById(e),n=document.createRange();n.selectNodeContents(t);var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}var t=function(e,t,n){var n=n||{},i={},c=function(e){!!i[e.selectorText]==!1&&(i[e.selectorText]={});var t=e.style.cssText.split(/;(?![A-Za-z0-9])/);t.forEach(function(t){if(!!t!=!1){var n=t.split(": ");n[0]=n[0].trim(),n[1]=n[1].trim(),i[e.selectorText][n[0]]=n[1]}})},r=function(){for(var i=e.innerHeight,r=t.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,function(e){return NodeFilter.FILTER_ACCEPT},!0);r.nextNode();){var o=r.currentNode,a=o.getBoundingClientRect();if(a.top<i||n.scanFullPage){var l=getNodeCSSRules(o);if(l)for(var s=0;s<l.length;s++)c(l[s])}}};this.generate=function(){var e="";for(var t in i){e+=t+"{";for(var n in i[t])e+=n+":"+i[t][n]+";";e+="}"}return e},r()};document.body.scrollTop=0;var n=new t(window,document),i=n.generate(),c=document.createElement("div");c.id="CriticalSnap";var r="<div><h1>Critical Snapshot</h1>";r+='<p id="CriticalSnap__output-css">'+i+"</p>",r+='<div id="CriticalSnap__buttons"><button type="button" class="CriticalSnap__button" id="CriticalSnap__copy">Copy</button>',r+='<button type="button" class="CriticalSnap__button" id="CriticalSnap__preview">Preview</button>',r+='<button type="button" class="CriticalSnap__button" id="CriticalSnap__close">Close</button></div>',r+="</div>",c.innerHTML=r,document.body.appendChild(c);var o=function(t){t.preventDefault(),t.stopPropagation(),e("CriticalSnap__output-css"),document.execCommand("copy"),d.style.backgroundColor="#34A853",d.style.color="#fff",d.innerHTML="Copied <span>üëç</span>"},a=function(e){e.preventDefault(),e.stopPropagation();const t=[].slice.call(document.querySelectorAll('[type="text/css"]'));t.forEach(function(e){e.remove()});const n=[].slice.call(document.getElementsByTagName("style"));n.forEach(function(e){e.remove()});var c=document.createElement("style");c.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(c),p.removeEventListener("click",a),p.remove(),u()},l=function(t){t.preventDefault(),t.stopPropagation(),e("CriticalSnap__output-css")},s=function(e){e&&e.preventDefault(),E()},u=function(){c.className="CriticalSnap__minified"},d=document.getElementById("CriticalSnap__copy"),p=document.getElementById("CriticalSnap__preview"),S=document.getElementById("CriticalSnap__output-css"),f=document.getElementById("CriticalSnap");d.addEventListener("click",o),p.addEventListener("click",a),S.addEventListener("click",l),f.addEventListener("click",s);var E=function(){d.removeEventListener("click",o),p.removeEventListener("click",a),S.removeEventListener("click",l),f.removeEventListener("click",s),c.remove()}}();
